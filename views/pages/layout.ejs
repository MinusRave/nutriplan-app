<!DOCTYPE html>
<html lang="<%= currentLang %>">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title><%= pageTitle %> - DietingWithJoe</title>
  <meta name="description" content="<%= t('app.description') %>">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/images/favicon/favicon.svg">
  <link rel="manifest" href="/images/favicon/site.webmanifest">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- App CSS -->
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="chat-inactive">
  <header class="app-header">
    <div class="brand">DietingWithJoe</div>
    <div class="header-actions">
      <!-- <div class="language-menu">
        <button id="language-btn" aria-label="<%= t('language.selector') %>">
          <%= currentLang.toUpperCase() %> <span class="chevron-down">▼</span>
        </button>
        <div class="language-dropdown hidden">
          <a href="/changelanguage/it?redirect=/" role="menuitem" class="<%= currentLang === 'it' ? 'active' : '' %>" lang="it">Italiano</a>
          <a href="/changelanguage/en?redirect=/" role="menuitem" class="<%= currentLang === 'en' ? 'active' : '' %>" lang="en">English</a>
          <a href="/changelanguage/fr?redirect=/" role="menuitem" class="<%= currentLang === 'fr' ? 'active' : '' %>" lang="fr">Français</a>
          <a href="/changelanguage/es?redirect=/" role="menuitem" class="<%= currentLang === 'es' ? 'active' : '' %>" lang="es">Español</a>
          <a href="/changelanguage/de?redirect=/" role="menuitem" class="<%= currentLang === 'de' ? 'active' : '' %>" lang="de">Deutsch</a>
          <a href="/changelanguage/pt?redirect=/" role="menuitem" class="<%= currentLang === 'pt' ? 'active' : '' %>" lang="pt">Português</a>
        </div> -->
      </div>
      <button id="menu-btn" aria-label="<%= t('menu.label', 'Menu') %>">
        <svg viewBox="0 0 24 24" width="20" height="20" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"/><circle cx="12" cy="5" r="1"/><circle cx="12" cy="19" r="1"/></svg>
      </button>
      <div id="menu-dropdown" class="menu-dropdown hidden">
        <a href="/privacy" role="menuitem"><%= t('footer.privacy') %></a>
        <a href="/terms" role="menuitem"><%= t('footer.terms') %></a>
        <a href="/contact" role="menuitem"><%= t('footer.contact') %></a>
      </div>
    </div>
  </header>

  <main class="app-container">
    <div class="page-header">
      <h1><%= pageTitle %></h1>
    </div>
    <div class="page-body">
      <%- pageContent %>
    </div>
    <div class="page-navigation">
      <a href="/" class="btn btn-secondary"><%= t('back_to_home') %></a>
    </div>
  </main>

  <footer>
    <div class="app-container" style="padding-top: 2rem; padding-bottom: 2rem;">
      <p>&copy; <%= new Date().getFullYear() %> <%= t('footer.copyright') %></p>
      <!-- <div class="footer-links">
        <a href="/privacy"><%= t('footer.privacy') %></a>
        <a href="/terms"><%= t('footer.terms') %></a>
        <a href="/contact"><%= t('footer.contact') %></a>
      </div> -->
    </div>
  </footer>

  <!-- Script lingua e menu -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Language dropdown functionality
      const langBtn = document.getElementById('language-btn');
      const langDropdown = document.querySelector('.language-dropdown');

      if (langBtn && langDropdown) {
        langBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          langDropdown.classList.toggle('hidden');
        });

        document.addEventListener('click', function(e) {
          if (!langDropdown.contains(e.target) && !langBtn.contains(e.target)) {
            langDropdown.classList.add('hidden');
          }
        });
      }
      
      // Menu dropdown functionality
      const menuBtn = document.getElementById('menu-btn');
      const menuDropdown = document.getElementById('menu-dropdown');
      
      if (menuBtn && menuDropdown) {
        menuBtn.addEventListener('click', function(e) {
          e.stopPropagation();
          menuDropdown.classList.toggle('hidden');
        });
        
        // Close menu when clicking elsewhere
        document.addEventListener('click', function(e) {
          if (!menuDropdown.contains(e.target) && !menuBtn.contains(e.target)) {
            menuDropdown.classList.add('hidden');
          }
        });
      }
    });
  </script>
</body>
</html>
